<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Мануал з роботи з тікетами | Ukraine GTA 5</title>
  <link rel="icon" href="1-17ffebdc.ico" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0A0A0A;
      --bg-secondary: #111111;
      --bg-tertiary: #1A1A1A;
      --border-color: #2A2A2A;
      --text-primary: #FAFAFA;
      --text-secondary: #A1A1A1;
      --text-tertiary: #6B6B6B;
      --accent-blue: #3B82F6;
      --accent-green: #10B981;
      --accent-yellow: #F59E0B;
      --accent-red: #EF4444;
      --shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
      --shadow-hover: 0 8px 32px rgba(59, 130, 246, 0.2);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="light"] {
      --bg-primary: #FFFFFF;
      --bg-secondary: #F9FAFB;
      --bg-tertiary: #F3F4F6;
      --border-color: #E5E7EB;
      --text-primary: #111827;
      --text-secondary: #6B7280;
      --text-tertiary: #9CA3AF;
      --shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
      --shadow-hover: 0 8px 32px rgba(59, 130, 246, 0.12);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      transition: background-color 0.3s ease, color 0.3s ease;
      line-height: 1.6;
    }

    /* Loading Spinner */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 4px solid var(--border-color);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Falling Stars Animation - Optimized */
    canvas#stars-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      opacity: 0.4;
      will-change: transform;
    }

    [data-theme="light"] canvas#stars-canvas {
      opacity: 0.15;
    }

    /* Sidebar - Improved */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 280px;
      height: 100%;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      padding: 1.5rem 0;
      overflow-y: auto;
      overflow-x: hidden;
      transform: translateX(-100%);
      box-shadow: 4px 0 24px rgba(0, 0, 0, 0.3);
    }

    .sidebar.open {
      transform: translateX(0);
    }

    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      backdrop-filter: blur(2px);
    }

    .sidebar-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 0.875rem;
      padding: 0 1.5rem 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .sidebar-logo {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--accent-blue), #2563EB);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .sidebar-title {
      font-size: 0.9375rem;
      font-weight: 600;
      color: var(--text-primary);
      line-height: 1.4;
    }

    .sidebar-menu {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      padding: 1rem 0.875rem;
    }

    .menu-category {
      font-size: 0.6875rem;
      font-weight: 700;
      color: var(--text-tertiary);
      padding: 0.75rem 0.875rem 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-top: 0.5rem;
    }

    .menu-category:first-child {
      margin-top: 0;
    }

    .menu-item, .super-menu-item {
      display: flex;
      align-items: center;
      gap: 0.875rem;
      padding: 0.75rem 0.875rem;
      color: var(--text-secondary);
      text-decoration: none;
      border-radius: 8px;
      transition: var(--transition-fast);
      font-size: 0.875rem;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .menu-item::before, .super-menu-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 3px;
      background: var(--accent-blue);
      transform: scaleY(0);
      transition: transform 0.2s ease;
    }

    .menu-item:hover, .super-menu-item:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      transform: translateX(4px);
    }

    .menu-item:hover::before, .super-menu-item:hover::before {
      transform: scaleY(1);
    }

    .menu-item i, .super-menu-item i {
      width: 18px;
      font-size: 0.9375rem;
      text-align: center;
    }

    .super-menu-item {
      color: var(--accent-yellow);
      background: rgba(245, 158, 11, 0.05);
    }

    .super-menu-item::before {
      background: var(--accent-yellow);
    }

    .super-menu-item:hover {
      background: rgba(245, 158, 11, 0.15);
    }

    /* Top Bar - Enhanced */
    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 64px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      z-index: 999;
      backdrop-filter: blur(12px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .top-bar-left {
      display: flex;
      align-items: center;
      gap: 1.25rem;
    }

    .menu-toggle {
      width: 40px;
      height: 40px;
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      font-size: 1.125rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .menu-toggle:hover {
      background: var(--bg-tertiary);
      border-color: var(--accent-blue);
      color: var(--accent-blue);
      transform: scale(1.05);
    }

    .menu-toggle:active {
      transform: scale(0.95);
    }

    .top-bar-title {
      font-size: 0.9375rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .top-bar-right {
      display: flex;
      align-items: center;
      gap: 0.875rem;
    }

    .theme-toggle {
      width: 40px;
      height: 40px;
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      font-size: 1rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .theme-toggle:hover {
      background: var(--bg-tertiary);
      border-color: var(--accent-blue);
      color: var(--accent-blue);
      transform: rotate(15deg) scale(1.05);
    }

    .theme-toggle:active {
      transform: rotate(15deg) scale(0.95);
    }

    .logout-btn {
      padding: 0.625rem 1.25rem;
      background: var(--accent-red);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition-fast);
      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
    }

    .logout-btn:hover {
      background: #DC2626;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
    }

    .logout-btn:active {
      transform: translateY(0);
    }

    /* Main Content - Improved */
    .main-content {
      margin-left: 0;
      margin-top: 64px;
      padding: 2.5rem 1.5rem;
      min-height: calc(100vh - 64px);
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0;
      animation: fadeIn 0.6s ease forwards;
      animation-delay: 0.2s;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    /* Login Section - Enhanced */
    #login-section {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-primary);
      z-index: 2000;
    }

    .login-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      padding: 3rem 2.5rem;
      border-radius: 16px;
      max-width: 460px;
      width: 90%;
      box-shadow: var(--shadow);
      text-align: center;
      animation: fadeInUp 0.6s ease-out;
    }

    .login-logo {
      width: 72px;
      height: 72px;
      margin: 0 auto 1.75rem;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--accent-blue), #2563EB);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
    }

    .login-logo i {
      font-size: 2.25rem;
      color: white;
    }

    .login-title {
      font-size: 1.625rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.625rem;
      line-height: 1.3;
    }

    .login-subtitle {
      font-size: 0.9375rem;
      color: var(--text-secondary);
      margin-bottom: 2.25rem;
      line-height: 1.5;
    }

    .telegram-button-wrapper {
      display: inline-block;
      border-radius: 10px;
      overflow: hidden;
      transition: var(--transition);
    }

    .telegram-button-wrapper:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
    }

    .login-footer {
      margin-top: 2rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .login-footer a {
      color: var(--accent-blue);
      text-decoration: none;
      transition: var(--transition-fast);
      font-weight: 500;
    }

    .login-footer a:hover {
      color: var(--accent-green);
      text-decoration: underline;
    }

    /* Access Denied - Enhanced */
    #access-denied-section {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .access-denied-content {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      padding: 2.5rem;
      border-radius: 16px;
      box-shadow: var(--shadow);
      text-align: center;
      max-width: 460px;
      width: 90%;
      animation: fadeInUp 0.6s ease-out;
    }

    .access-denied-icon {
      font-size: 4rem;
      margin-bottom: 1.25rem;
      animation: shake 0.5s ease;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .access-denied-title {
      font-size: 1.625rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1rem;
    }

    .access-denied-message {
      font-size: 0.9375rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .back-to-login-btn {
      padding: 0.75rem 1.75rem;
      background: var(--accent-red);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 0.9375rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition-fast);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    .back-to-login-btn:hover {
      background: #DC2626;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
    }

    /* Content Styles - Improved */
    header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    .header-content {
      background: var(--bg-secondary);
      padding: 2.5rem;
      border-radius: 16px;
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow);
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      line-height: 1.3;
    }

    h1 i {
      color: var(--accent-blue);
    }

    h2, h3 {
      font-size: 1.375rem;
      font-weight: 600;
      color: var(--accent-blue);
      margin: 2rem 0 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.625rem;
      line-height: 1.4;
    }

    h3 {
      font-size: 1.125rem;
      margin: 1.5rem 0 1rem;
    }

    p {
      font-size: 0.9375rem;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 1.25rem;
    }

    ol {
      margin-left: 1.5rem;
      margin-bottom: 1.25rem;
    }

    ol li {
      font-size: 0.9375rem;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 0.625rem;
    }

    .section {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2.5rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
      opacity: 0;
      animation: fadeInUp 0.8s ease forwards;
    }

    .section:hover {
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }

    .step {
      background: var(--bg-tertiary);
      border-left: 4px solid var(--accent-blue);
      padding: 1.5rem;
      margin-bottom: 2rem;
      border-radius: 0 10px 10px 0;
      transition: var(--transition-fast);
    }

    .step:hover {
      border-left-width: 6px;
      padding-left: 1.375rem;
    }

    .example {
      background: var(--bg-tertiary);
      padding: 1.25rem;
      border-radius: 10px;
      margin: 1.25rem 0;
      border-left: 3px solid var(--accent-blue);
    }

    .example-title {
      display: flex;
      align-items: center;
      gap: 0.625rem;
      color: var(--accent-blue);
      font-size: 0.9375rem;
      font-weight: 600;
      margin-bottom: 0.875rem;
    }

    .dialog-container {
      margin: 1.25rem 0;
    }

    .message {
      max-width: 85%;
      padding: 1.125rem 1.25rem;
      margin-bottom: 1.25rem;
      border-radius: 14px;
      position: relative;
      background: var(--bg-tertiary);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      font-size: 0.9375rem;
      line-height: 1.6;
    }

    .message.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .player-message {
      margin-right: auto;
      border-top-left-radius: 4px;
      border: 1px solid var(--border-color);
    }

    .player-message::before {
      content: 'Гравець';
      position: absolute;
      top: -1.75rem;
      left: 0;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--accent-blue);
      background: var(--bg-secondary);
      padding: 0.375rem 0.875rem;
      border-radius: 20px;
      border: 1px solid var(--border-color);
    }

    .admin-message {
      margin-left: auto;
      border-top-right-radius: 4px;
      background: rgba(59, 130, 246, 0.12);
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .admin-message::before {
      content: 'Адміністратор';
      position: absolute;
      top: -1.75rem;
      right: 0;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--accent-blue);
      background: var(--bg-secondary);
      padding: 0.375rem 0.875rem;
      border-radius: 20px;
      border: 1px solid var(--border-color);
    }

    .system-note {
      background: rgba(239, 68, 68, 0.12);
      padding: 1rem 1.125rem;
      border-radius: 10px;
      margin: 1.25rem 0;
      color: var(--text-secondary);
      font-size: 0.875rem;
      border-left: 3px solid var(--accent-red);
      opacity: 0;
      transform: translateX(-20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      line-height: 1.6;
    }

    .system-note.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .system-note::before {
      content: 'ℹ️';
      margin-right: 0.625rem;
      font-size: 1rem;
    }

    .ticket-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 2.5rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .ticket-card:hover {
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }

    .ticket-header {
      padding: 1.25rem 1.5rem;
      background: rgba(59, 130, 246, 0.12);
      border-bottom: 1px solid var(--border-color);
    }

    .ticket-header h3 {
      margin: 0;
      color: var(--accent-blue);
      display: flex;
      align-items: center;
      gap: 0.625rem;
      font-size: 1.0625rem;
    }

    .ticket-content {
      padding: 2rem 1.5rem;
    }

    .priority {
      display: inline-block;
      padding: 0.4375rem 0.875rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-left: 0.875rem;
      background: rgba(239, 68, 68, 0.12);
      color: var(--accent-red);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .signature {
      text-align: center;
      font-style: italic;
      color: var(--accent-blue);
      margin-top: 2.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border-color);
      font-size: 1.0625rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.625rem;
      font-weight: 500;
    }

    footer {
      text-align: center;
      padding: 2.5rem 0;
      color: var(--text-tertiary);
      font-size: 0.875rem;
      margin-top: 3rem;
      border-top: 1px solid var(--border-color);
    }

    footer p {
      color: var(--text-tertiary);
      margin-bottom: 0.5rem;
    }

    /* Animations - Optimized */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive - Enhanced */
    @media (max-width: 768px) {
      .top-bar {
        padding: 0 1rem;
        height: 60px;
      }

      .main-content {
        padding: 1.5rem 1rem;
        margin-top: 60px;
      }

      .message {
        max-width: 95%;
        padding: 1rem;
      }

      .sidebar {
        width: 85%;
        max-width: 320px;
      }

      .login-container {
        padding: 2rem 1.5rem;
      }

      .login-title {
        font-size: 1.375rem;
      }

      h1 {
        font-size: 1.5rem;
        flex-direction: column;
        gap: 0.5rem;
      }

      h2 {
        font-size: 1.25rem;
      }

      .section {
        padding: 1.5rem;
      }

      .header-content {
        padding: 2rem 1.5rem;
      }

      .step {
        padding: 1.25rem;
      }

      .ticket-content {
        padding: 1.5rem 1.25rem;
      }
    }

    @media (max-width: 480px) {
      .top-bar-title {
        display: none;
      }

      .logout-btn {
        padding: 0.5rem 0.875rem;
        font-size: 0.8125rem;
      }

      .message::before {
        font-size: 0.6875rem;
        padding: 0.25rem 0.625rem;
      }
    }

    /* Scrollbar - Improved */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 5px;
      border: 2px solid var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-tertiary);
    }

    /* Utility Classes */
    .hidden {
      display: none !important;
    }
  </style>
</head>
<body data-theme="dark">
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
  </div>

  <canvas id="stars-canvas"></canvas>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebar-overlay"></div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <i class="fas fa-headset"></i>
      </div>
      <div class="sidebar-title">Мануал Тікетів</div>
    </div>
    <div class="sidebar-menu">
      <div class="menu-category">Скрипти</div>
      <a href="script1.1.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.1</a>
      <a href="script1.2.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.2</a>
      <a href="script1.3.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.3</a>
      <a href="script1.4.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.4</a>
      <a href="script1.5.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.5</a>
      <a href="script1.6.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.6</a>
      <a href="script1.7.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.7</a>
      <a href="script1.8.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.8</a>
      <a href="script1.9.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.9</a>
      <a href="scriptbaltpass.html" class="menu-item"><i class="fas fa-code"></i> Осінній БатлКвас</a>
      <div class="menu-category">Інформація</div>
      <a href="index.html" class="menu-item"><i class="fas fa-home"></i> Головна</a>
      <a href="team.html" class="menu-item"><i class="fas fa-users"></i> Команда проєкту</a>
      <a href="tickets.html" class="menu-item"><i class="fas fa-ticket-alt"></i> Регламент тікетів</a>
      <a href="commands.html" class="menu-item"><i class="fas fa-terminal"></i> Команди адміністратора</a>
      <a href="faq.html" class="menu-item"><i class="fas fa-question-circle"></i> Питання та відповіді</a>
      <a href="frac.html" class="menu-item"><i class="fas fa-flag"></i> Фракції</a>
      <a href="binder.html" class="menu-item"><i class="fas fa-robot"></i> BinderBot</a>
      <div class="menu-category" id="superMenuCategory" style="display: none;">Суперадмін</div>
      <a href="test.html" class="super-menu-item" id="superMenuItem1" style="display: none;"><i class="fas fa-chart-bar"></i> Статистика</a>
      <a href="super-script2.html" class="super-menu-item" id="superMenuItem2" style="display: none;"><i class="fas fa-calculator"></i> Калькулятор онлайну</a>
      <a href="super-script3.html" class="super-menu-item" id="superMenuItem3" style="display: none;"><i class="fas fa-warehouse"></i> Контроль складу</a>
    </div>
  </div>

  <!-- Top Bar -->
  <div class="top-bar hidden" id="top-bar">
    <div class="top-bar-left">
      <button class="menu-toggle" id="menu-toggle" aria-label="Відкрити меню">
        <i class="fas fa-bars"></i>
      </button>
      <div class="top-bar-title" id="top-bar-title">Мануал з тікетами</div>
    </div>
    <div class="top-bar-right">
      <button class="theme-toggle" id="theme-toggle" aria-label="Змінити тему">
        <i class="fas fa-moon"></i>
      </button>
      <button class="logout-btn" id="logout-btn">Вийти</button>
    </div>
  </div>

  <!-- Access Denied Section -->
  <div id="access-denied-section">
    <div class="access-denied-content">
      <div class="access-denied-icon">🚫</div>
      <h1 class="access-denied-title">ВІДМОВЛЕНО У ДОСТУПІ</h1>
      <p class="access-denied-message">
        Ваш обліковий запис не має доступу до цього контенту.<br>
        Будь ласка, зверніться до суперадміністратора для отримання додаткової інформації.
      </p>
      <button class="back-to-login-btn" onclick="logout()">Повернутися до входу</button>
    </div>
  </div>

  <!-- Login Section -->
  <div id="login-section">
    <div class="login-container">
      <div class="login-logo">
        <i class="fas fa-headset"></i>
      </div>
      <h1 class="login-title">Мануал з роботи з тікетами</h1>
      <p class="login-subtitle">Увійдіть через Telegram для доступу до інформації</p>
      <div class="telegram-button-wrapper">
        <script async src="https://telegram.org/js/telegram-widget.js?7"
                data-telegram-login="ticket_tracker_UG_bot" 
                data-size="large"
                data-userpic="false"
                data-request-access="write"
                data-onauth="onTelegramAuth(user)">
        </script>
      </div>
      <div class="login-footer">
        Потрібна допомога? <a href="support.html">Зверніться до підтримки</a>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content hidden" id="main-content">
    <header>
      <div class="header-content">
        <h1><i class="fas fa-headset"></i> Мануал з роботи з тікетами</h1>
        <p>Вітаємо вас, шановний адміністраторе!</p>
      </div>
    </header>

    <div class="section">
      <p>Цей розділ присвячений важливій темі — як правильно та ефективно відповідати на тікети від гравців. Робота з тікетами — це не просто технічне завдання, а ключовий елемент високоякісного сервісу, який ми прагнемо надавати кожному користувачеві.</p>
      <p>З моменту, коли ви прийняли тікет — ви повністю відповідальні за його вирішення. Ваш головний пріоритет — надати гравцю оперативну, чітку та ввічливу допомогу. Ми прагнемо, щоб кожен користувач залишався задоволеним і відчував, що потрапив у спільноту з надійною та уважною адміністрацією.</p>
      <p>Наша мета — бути кращими, а не просто "не гіршими за інших". Ми не рівняємось на ті проєкти, де відповіді затягуються на 10, 30 чи навіть 120 хвилин. Ми діємо швидко. Гравець не повинен чекати — він має отримати підтримку одразу.</p>
      <p>У цьому мануалі ви знайдете приклади правильної побудови відповідей, шаблони та поради, які допоможуть вам професійно та ефективно обробляти будь-який запит. Разом ми створимо сервіс, яким будемо пишатися.</p>
    </div>

    <div class="section">
      <h2><i class="fas fa-list-ol"></i> Хронологія обробки тікетів</h2>
      <p>У цьому розділі ми розглянемо чітку послідовність дій, яку повинен виконувати кожен адміністратор під час роботи з тікетами. Дотримання цієї структури дозволить забезпечити якісне та професійне обслуговування гравців.</p>

      <div class="step">
        <h3><i class="fas fa-user-tie"></i> 1. Представлення</h3>
        <p>Після прийняття тікету перше, що ви повинні зробити — представитись, щоб гравець одразу зрозумів, з ким веде діалог.</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Приклад правильної відповіді:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Вітаю, шановний гравцю! На зв'язку Хелпер Kriss Noxx, починаю працювати над вашим зверненням.
            </div>
          </div>
        </div>
      </div>

      <div class="step">
        <h3><i class="fas fa-search"></i> 2. Аналіз ситуації та відповідь по суті</h3>
        <p>Ваша відповідь має виходити із ситуації, з якою звернувся гравець. Вона повинна бути чіткою, ввічливою та інформативною. Адміністрація не повинна порушувати правил, навіть якщо гравець просить про щось нестандартне — натомість слід пояснити можливі дії в рамках RP-сценарію.</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Ситуація:</span>
          </div>
          <div class="dialog-container">
            <div class="message player-message">
              Дайте ХП
            </div>
          </div>
          <div class="example-title" style="margin-top: 1rem;">
            <i class="fas fa-star"></i>
            <span>Правильна відповідь:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              На жаль, шановний гравцю, адміністрація не видає ХП. Ви можете звернутися за допомогою до працівників EMS у центральній лікарні Los Santos або Sandy Shores. Також є можливість придбати аптечку у магазині 24/7, позначеному на карті іконкою кошика.
            </div>
          </div>
        </div>
      </div>

      <div class="step">
        <h3><i class="fas fa-question-circle"></i> 3. Перевірка наявності додаткових питань</h3>
        <p>Після того як відповідь надана, обов'язково запитайте, чи залишились у гравця ще якісь запитання.</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Форма запитання:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Шановний гравцю, чи залишилися у вас ще запитання?
            </div>
          </div>
        </div>
        <p>Якщо гравець відповідає, що питань більше немає:</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Завершення тікету:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Дякую за звернення! Бажаю приємної гри та відмінного настрою на Ukraine GTA 5.
            </div>
          </div>
        </div>
        <p>Якщо гравець не відповідає — зачекайте 5 хвилин з моменту останнього повідомлення, після чого надайте фінальну відповідь:</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Приклад відповіді при відсутності реакції:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Шановний гравцю, не отримав від вас відповіді. Закриваю тікет. Бажаю приємної гри та відмінного настрою!
            </div>
          </div>
        </div>
      </div>

      <div class="step">
        <h3><i class="fas fa-exclamation-triangle"></i> ⚠️ Приклад: "ТП, мене вбивають"</h3>
        <p>Покрокові дії:</p>
        <ol>
          <li>Приймаєте тікет та телепортуєтесь до гравця в інвізі (невидимості), починаєте слідкувати за ситуацією.</li>
          <li>Якщо підтверджується порушення правил — видаєте покарання гравцю-порушнику згідно з регламентом.</li>
          <li>Даєте відповідь у тікеті відповідно до шаблону:</li>
        </ol>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Приклад відповіді:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Вітаю, на зв'язку Адміністратор [Ваше ім'я та прізвище]. Порушення було зафіксовано, гравця покарано згідно з правилами.
            </div>
          </div>
          <p style="text-align: center; margin: 0.75rem 0;">Або:</p>
          <div class="dialog-container">
            <div class="message admin-message">
              Вітаю, на зв'язку Адміністратор [Ваше ім'я та прізвище]. Порушень у діях інших гравців не виявлено.
            </div>
          </div>
        </div>
        <p>Завершуєте тікет стандартним запитанням:</p>
        <div class="dialog-container">
          <div class="message admin-message">
            Шановний гравцю, чи залишилися у вас ще запитання?
          </div>
        </div>
        <p>— Якщо є питання — відповідаєте.<br>
        — Якщо питань немає — закриваєте тікет:</p>
        <div class="example">
          <div class="example-title">
            <i class="fas fa-star"></i>
            <span>Приклад завершення:</span>
          </div>
          <div class="dialog-container">
            <div class="message admin-message">
              Дякую за звернення! Бажаю приємної гри та відмінного настрою!
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fas fa-ticket-alt"></i> Приклади тікетів</h2>
      <p>Нижче будуть наведені приклади, як правильно відповідати на тікети в різних ситуаціях.</p>

      <!-- Тікет 1 -->
      <div class="ticket-card">
        <div class="ticket-header">
          <h3><i class="fas fa-exclamation-circle"></i> Тікет 1 <span class="priority">Термінова допомога</span></h3>
        </div>
        <div class="ticket-content">
          <div class="dialog-container">
            <div class="message player-message">
              доброї ночі. зламалася фура, а евакуатора немає. допоможіть будь ласка.
            </div>
            <div class="message admin-message">
              Вітаю, на зв'язку Хелпер Ivan Gromov, починаю працювати за вашим зверненням.
            </div>
            <div class="system-note">
              *Телепортуєтесь до гравця, оцінюєте ситуацію, якщо пізня година та немає працівників на Евакуаторі, то ремонтуєте автомобіль.
            </div>
            <div class="system-note">
              * Після того як поремонтували, запитуєте в тікеті чи ще є запитання у гравця*
            </div>
            <div class="message admin-message">
              У вас залишились ще запитання?
            </div>
            <div class="message player-message">
              так. вибачте будь ласка випадково залив не те паливо. можете з цим допомогти?
            </div>
            <div class="system-note">
              *Заливаєте йому 1 літр, після чого сповіщаєте його в тікеті*
            </div>
            <div class="message admin-message">
              Заправив вам 1 літр доїдте до найближчої заправки та залийте правильне паливо.
            </div>
            <div class="message player-message">
              дякую велике
            </div>
            <div class="message admin-message">
              Закриваю тікет. Бажаю Приємної гри та відмінного настрою на Ukraine GTA 5.
            </div>
          </div>
        </div>
      </div>

      <!-- Тікет 2 -->
      <div class="ticket-card">
        <div class="ticket-header">
          <h3><i class="fas fa-info-circle"></i> Тікет 2 <span class="priority">Інформаційне запитання</span></h3>
        </div>
        <div class="ticket-content">
          <div class="dialog-container">
            <div class="message player-message">
              -У що можна пограти в казино? Знайшов тыльки покер
            </div>
            <div class="message admin-message">
              -Вітаю, на зв'язку Хелпер Ivan Gromov, починаю працювати за вашим зверненням.
            </div>
            <div class="system-note">
              Тут телепортація є необов'язковою, ви можете пояснити гравцю всю інформацію в тікеті:
            </div>
            <div class="message admin-message">
              -В нашому казино є всього 3 гри, а саме: Рулетка, де ви можете поставити червоне або чорне, Покер - в якому ви можете пограти з гравцями та Кубики, це ви можете зі своїм другом кинути куби, у кого випаде більше той виграв.
            </div>
            <div class="message player-message">
              -в що я можу пограти сам?
            </div>
            <div class="message admin-message">
              -Самостійно ви можете пограти в рулетку, там не потрібні додаткові гравці для гри.
            </div>
            <div class="message admin-message">
              У вас залишились ще запитання?
            </div>
            <div class="message player-message">
              -Ні дякую.
            </div>
            <div class="message admin-message">
              -Приємної гри та відмінного настрою на Ukraine GTA 5.
            </div>
          </div>
        </div>
      </div>

      <!-- Тікет 3 -->
      <div class="ticket-card">
        <div class="ticket-header">
          <h3><i class="fas fa-certificate"></i> Тікет 3 <span class="priority">Питання щодо ліцензій</span></h3>
        </div>
        <div class="ticket-content">
          <div class="dialog-container">
            <div class="message player-message">
              как получитть лецензию на оружие
            </div>
            <div class="message admin-message">
              -Вітаю, на зв'язку Хелпер Ivan Gromov, починаю працювати за вашим зверненням.
            </div>
            <div class="message admin-message">
              - Ліцензію ви можете отримати у працівників LSPD або BCSD, зазвичай вони стоять в холлі своїх будівель.
            </div>
            <div class="message player-message">
              - ага а если их нету?
            </div>
            <div class="message admin-message">
              - Зараз їх зміна закінчена, спробуйте зранку або перегляньте графік видачі ліцензій на зброю на форумі у розділі данної фракції.
            </div>
            <div class="message admin-message">
              - Вам потрібна ще якась допомога?
            </div>
            <div class="message player-message">
              - та было бы хорошо если бы мне ножи кто то купил или продал лицензию
            </div>
            <div class="message admin-message">
              - Ножі можна купити на маркеплейсі, якщо у вас є планешт ви можете зайти на маркет плейс та при наявності Дарк флеш увійти у дарк нет та там купити зброю. Якщо у вас планшета немає, ви можете придбати його в магазині 24 на 7, який на карті позначений кошиком, дарк флеш ви можете купити або на маркет плейсі, або знайти у смітниках, або на роботі "Шукач Скарбів".
            </div>
            <div class="message player-message">
              - все спасибо сейчас постараюсь разобраться с почтой
            </div>
            <div class="message admin-message">
              -Приємної гри та відмінного настрою на Ukraine GTA 5.
            </div>
          </div>
        </div>
      </div>

      <div class="signature">
        <i class="fas fa-hands-helping"></i> Разом ми створимо сервіс, яким будемо пишатися!
      </div>
    </div>

    <footer>
      <p>© 2025 Ukraine GTA 5 RolePlay | Адміністрація сервера</p>
      <p style="margin-top: 0.75rem; opacity: 0.7;"><i class="fas fa-star"></i> Швидкість. Якість. Повага. <i class="fas fa-star"></i></p>
    </footer>
  </div>

  <script>
    // Performance optimizations
    let animationFrameId;
    let isAnimating = true;

    // Falling Stars Animation - Optimized with requestAnimationFrame
    const canvas = document.getElementById('stars-canvas');
    const ctx = canvas.getContext('2d', { alpha: true });

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    resizeCanvas();
    
    // Debounced resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(resizeCanvas, 150);
    });

    const stars = [];
    const numStars = Math.min(80, Math.floor(window.innerWidth / 15)); // Adaptive star count

    class Star {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * -canvas.height;
        this.size = Math.random() * 2 + 0.5;
        this.speed = Math.random() * 3 + 0.5;
        this.opacity = Math.random() * 0.5 + 0.3;
      }

      update() {
        this.y += this.speed;
        if (this.y > canvas.height) {
          this.reset();
        }
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.fill();
      }
    }

    for (let i = 0; i < numStars; i++) {
      stars.push(new Star());
    }

    function animateStars() {
      if (!isAnimating) return;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      stars.forEach(star => {
        star.update();
        star.draw();
      });
      animationFrameId = requestAnimationFrame(animateStars);
    }

    animateStars();

    // Pause animation when tab is not visible
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        isAnimating = false;
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
        }
      } else {
        isAnimating = true;
        animateStars();
      }
    });

    // Theme Toggle
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    
    const savedTheme = localStorage.getItem('theme') || 'dark';
    body.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    
    themeToggle.addEventListener('click', () => {
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
    });
    
    function updateThemeIcon(theme) {
      const icon = themeToggle.querySelector('i');
      icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
    }

    // Menu Toggle with Overlay
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    
    function openSidebar() {
      sidebar.classList.add('open');
      sidebarOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeSidebar() {
      sidebar.classList.remove('open');
      sidebarOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    menuToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      if (sidebar.classList.contains('open')) {
        closeSidebar();
      } else {
        openSidebar();
      }
    });
    
    sidebarOverlay.addEventListener('click', closeSidebar);

    // Close sidebar when clicking outside
    document.addEventListener('click', (event) => {
      if (!sidebar.contains(event.target) && 
          !menuToggle.contains(event.target) && 
          sidebar.classList.contains('open')) {
        closeSidebar();
      }
    });

    // Close sidebar on navigation
    const menuItems = document.querySelectorAll('.menu-item, .super-menu-item');
    menuItems.forEach(item => {
      item.addEventListener('click', () => {
        setTimeout(closeSidebar, 200);
      });
    });

    // Google Sheets Configuration
    const SHEET_ID = '1fobxr4QwD8CLYFaTh2WXNbGwqQ2mWEuQDPkqDzvzkoU';
    const API_KEY = 'AIzaSyB3NNELU9ok5mkbHQnBEoOfRtNtPb-y5LU';
    const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache

    // Super admins list
    const superAdmins = [
      '@laker_77',
      '@B_m_b1',
      '@c10mm'
    ];

    // Cache management
    let cachedSheetData = null;
    let cacheTimestamp = null;

    // Get data from Google Sheets with caching
    async function getSheetData(sheetName) {
      const now = Date.now();
      
      // Return cached data if valid
      if (cachedSheetData && cacheTimestamp && (now - cacheTimestamp < CACHE_DURATION)) {
        console.log('Using cached data');
        return cachedSheetData;
      }

      try {
        const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${encodeURIComponent(sheetName)}?key=${API_KEY}`;
        const res = await axios.get(url, { 
          timeout: 8000,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        cachedSheetData = res.data.values || [];
        cacheTimestamp = now;
        return cachedSheetData;
      } catch (error) {
        console.error(`Помилка при отриманні даних з ${sheetName}:`, error);
        
        // Return cached data if available, even if expired
        if (cachedSheetData) {
          console.log('Using expired cache due to error');
          return cachedSheetData;
        }
        
        return [];
      }
    }

    // Telegram auth handler
    async function onTelegramAuth(user) {
      console.log('Telegram auth triggered:', user);
      
      if (!user || !user.username) {
        console.error('Invalid user data:', user);
        showAccessDenied();
        return;
      }

      const telegramUsername = '@' + user.username;
      console.log('Processing user:', telegramUsername);

      // Show loading
      showLoading();

      try {
        const ticketsData = await getSheetData('Май_2025_таблица');
        
        if (!ticketsData.length) {
          console.error('No tickets data found');
          hideLoading();
          showAccessDenied();
          return;
        }

        const ticketsHeaders = ticketsData[0];
        const telegramColIndex = ticketsHeaders.indexOf('Telegram');

        if (telegramColIndex === -1) {
          console.error('Telegram column not found in tickets data');
          hideLoading();
          showAccessDenied();
          return;
        }

        const userTicketsRow = ticketsData.find(row => 
          row[telegramColIndex]?.trim().toLowerCase() === telegramUsername.toLowerCase()
        );

        if (userTicketsRow) {
          console.log('User found in tickets data:', userTicketsRow);
          const userData = {
            username: telegramUsername,
            nickname: userTicketsRow[0] || user.first_name || user.username,
            timestamp: Date.now()
          };
          localStorage.setItem('tg_auth', JSON.stringify(userData));
          
          hideLoading();
          showContent(telegramUsername);
          
          // Animate messages after content is shown
          setTimeout(() => {
            animateMessages();
          }, 300);
        } else {
          console.error('User not found in tickets data:', telegramUsername);
          localStorage.removeItem('tg_auth');
          hideLoading();
          showAccessDenied();
        }
      } catch (error) {
        console.error('Помилка перевірки авторизації:', error);
        hideLoading();
        showAccessDenied();
      }
    }

    // Loading state management
    function showLoading() {
      document.getElementById('loading-overlay').classList.remove('hidden');
    }

    function hideLoading() {
      document.getElementById('loading-overlay').classList.add('hidden');
    }

    // Show content
    function showContent(telegramUsername) {
      console.log('Showing content for:', telegramUsername);
      document.getElementById('login-section').style.display = 'none';
      document.getElementById('main-content').classList.remove('hidden');
      document.getElementById('top-bar').classList.remove('hidden');
      document.getElementById('access-denied-section').style.display = 'none';

      // Show super admin menu if applicable
      if (superAdmins.includes(telegramUsername)) {
        console.log('User is superAdmin, showing super menu');
        document.getElementById('superMenuCategory').style.display = 'block';
        document.getElementById('superMenuItem1').style.display = 'flex';
        document.getElementById('superMenuItem2').style.display = 'flex';
        document.getElementById('superMenuItem3').style.display = 'flex';
      }
    }

    // Show login form
    function showLoginForm() {
      console.log('Showing login form');
      document.getElementById('login-section').style.display = 'flex';
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('top-bar').classList.add('hidden');
      document.getElementById('access-denied-section').style.display = 'none';
      hideLoading();
    }

    // Show access denied
    function showAccessDenied() {
      console.log('Showing access denied section');
      document.getElementById('access-denied-section').style.display = 'flex';
      document.getElementById('login-section').style.display = 'none';
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('top-bar').classList.add('hidden');
    }

    // Logout function
    function logout() {
      console.log('Logging out');
      localStorage.removeItem('tg_auth');
      cachedSheetData = null;
      cacheTimestamp = null;
      closeSidebar();
      showLoginForm();
    }

    // Animate messages with Intersection Observer for better performance
    function animateMessages() {
      const messages = document.querySelectorAll('.message, .system-note');
      
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
              setTimeout(() => {
                entry.target.classList.add('visible');
              }, index * 100);
              observer.unobserve(entry.target);
            }
          });
        }, {
          threshold: 0.1,
          rootMargin: '50px'
        });

        messages.forEach(message => {
          observer.observe(message);
        });
      } else {
        // Fallback for browsers without IntersectionObserver
        let delay = 0;
        messages.forEach(message => {
          setTimeout(() => {
            message.classList.add('visible');
          }, delay);
          delay += 200;
        });
      }
    }

    // Check saved session on load
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded');
      
      // Setup logout button
      document.getElementById('logout-btn').addEventListener('click', logout);

      const savedAuth = localStorage.getItem('tg_auth');
      
      if (savedAuth) {
        try {
          console.log('Found saved auth');
          const userData = JSON.parse(savedAuth);
          
          // Check if session is not too old (24 hours)
          const sessionAge = Date.now() - (userData.timestamp || 0);
          const maxAge = 24 * 60 * 60 * 1000; // 24 hours
          
          if (sessionAge < maxAge) {
            hideLoading();
            showContent(userData.username);
            setTimeout(animateMessages, 300);
          } else {
            console.log('Session expired');
            localStorage.removeItem('tg_auth');
            hideLoading();
            showLoginForm();
          }
        } catch (e) {
          console.error('Error parsing saved auth:', e);
          localStorage.removeItem('tg_auth');
          hideLoading();
          showLoginForm();
        }
      } else {
        console.log('No saved auth, showing login form');
        hideLoading();
        showLoginForm();
      }
    });

    // Preload critical resources
    window.addEventListener('load', () => {
      // Hide loading overlay after everything is loaded
      setTimeout(hideLoading, 500);
    });
  </script>
</body>
</html>
