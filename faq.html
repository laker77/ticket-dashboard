<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Адміністративний посібник | Ukraine GTA 5</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script async src="https://telegram.org/js/telegram-widget.js?7"
            data-telegram-login="ticket_tracker_UG_bot"
            data-size="large"
            data-userpic="false"
            data-request-access="write"
            data-onauth="onTelegramAuth(user)"></script>
    <style>
        :root {
            --primary-color: #3B82F6;
            --secondary-color: #10B981;
            --accent-color: #F59E0B;
            --background-dark: #0A0C1A;
            --card-bg: rgba(20, 22, 35, 0.9);
            --glass-bg: rgba(20, 22, 35, 0.7);
            --glass-blur: blur(5px);
            --shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            --text-primary: #F3F4F6;
            --text-secondary: #D1D5DB;
            --card-border: rgba(59, 130, 246, 0.2);
            --level-1: #4ade80;
            --level-2: #60a5fa;
            --level-3: #f87171;
            --level-4: #fbbf24;
            --level-5: #c084fc;
            --level-6: #f472b6;
            --level-faq: #9c27b0;
            --scrollbar: #3b82f6;
            --scrollbar-bg: #1a1a1a;
            --category-general: #4caf50;
            --category-rules: #ff9800;
            --category-admin: #9c27b0;
            --category-fractions: #2196f3;
            --category-supply: #e91e63;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: var(--background-dark);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(59, 130, 246, 0.05) 0%, transparent 20%);
        }

        canvas#stars-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 0.6;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100%;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            box-shadow: var(--shadow);
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 1.5rem;
            border-right: 1px solid var(--card-border);
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-toggle {
            position: fixed;
            top: 1rem;
            left: 1rem;
            width: 2.2rem;
            height: 2.2rem;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            color: var(--primary-color);
            font-size: 1.3rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .sidebar-toggle:hover {
            background: rgba(59, 130, 246, 0.3);
            transform: scale(1.1);
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 2.5rem;
        }

        .menu-category {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .menu-item, .super-menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .menu-item:hover, .super-menu-item:hover {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.3), transparent);
            transform: translateX(5px);
        }

        .menu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary-color);
        }

        .super-menu-item {
            color: var(--accent-color);
        }

        #login-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--background-dark);
            z-index: 1000;
            overflow: hidden;
        }

        .login-container {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            padding: 2.5rem;
            border-radius: 1rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.2) 8%, transparent 8.01%);
            background-size: 30px 30px;
            animation: moveBackground 25s linear infinite;
            z-index: -1;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 25px rgba(59, 130, 246, 0.5);
            animation: pulse 2.5s infinite ease-in-out;
        }

        .login-title {
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .login-subtitle {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .telegram-button-wrapper {
            display: inline-block;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .telegram-button-wrapper:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.7);
        }

        .login-footer {
            margin-top: 1.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .login-footer a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .login-footer a:hover {
            color: var(--secondary-color);
        }

        #logout-btn {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: #EF4444;
            color: var(--text-primary);
            padding: 0.5rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
            border: none;
        }

        #logout-btn:hover {
            background: #DC2626;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 1.5rem;
        }

        header {
            text-align: center;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .header-content {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            padding: 2rem;
            border-radius: 1rem;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 1rem;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--primary-color);
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }

        .search-container {
            max-width: 700px;
            margin: 40px auto;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 18px 25px;
            padding-left: 60px;
            border-radius: 50px;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--card-border);
            color: var(--text-primary);
            font-size: 1.1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .commands-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .level-card {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            padding-bottom: 15px;
        }

        .level-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .level-faq .card-header {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.15), transparent);
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            flex-shrink: 0;
        }

        .level-faq .card-icon {
            background: var(--level-faq);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .level-faq .card-title {
            color: var(--level-faq);
        }

        .card-content {
            padding: 0 25px 25px;
            overflow-y: auto;
            max-height: 750px;
            flex-grow: 1;
        }

        .card-content::-webkit-scrollbar {
            width: 8px;
        }

        .card-content::-webkit-scrollbar-track {
            background: var(--scrollbar-bg);
            border-radius: 4px;
        }

        .card-content::-webkit-scrollbar-thumb {
            background: var(--scrollbar);
            border-radius: 4px;
        }

        .card-content::-webkit-scrollbar-thumb:hover {
            background: var(--accent-light);
        }

        .command, .faq-item {
            margin-bottom: 25px;
            padding: 18px;
            border-radius: 12px;
            background: rgba(40, 40, 40, 0.5);
            transition: all 0.3s ease;
            border-left: 3px solid var(--card-border);
            overflow: hidden;
            position: relative;
        }

        .command:hover, .faq-item:hover {
            background: rgba(50, 50, 50, 0.7);
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .command-name {
            font-family: 'Courier New', monospace;
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            word-break: break-word;
        }

        .command-name i {
            color: var(--secondary-color);
            flex-shrink: 0;
        }

        .command-desc, .faq-answer {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            word-break: break-word;
        }

        .param {
            color: #f0abfc;
            font-style: italic;
            white-space: nowrap;
        }

        .optional {
            color: var(--text-secondary);
        }

        .faq-question {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-question i {
            color: var(--level-faq);
            flex-shrink: 0;
        }

        footer {
            text-align: center;
            padding: 50px 0 30px;
            color: var(--text-secondary);
            margin-top: 60px;
            border-top: 1px solid var(--card-border);
        }

        .footer-logo {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 1.5rem;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--card-border);
        }

        .copyright {
            font-size: 0.9rem;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-50%, -50%); }
        }

        .categories-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px 0;
            justify-content: center;
        }

        .category-tab {
            padding: 10px 20px;
            border-radius: 30px;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            border: 2px solid transparent;
        }

        .category-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .category-tab.active {
            border-color: currentColor;
            box-shadow: 0 0 15px currentColor;
        }

        .category-general { color: var(--category-general); }
        .category-rules { color: var(--category-rules); }
        .category-admin { color: var(--category-admin); }
        .category-fractions { color: var(--category-fractions); }
        .category-supply { color: var(--category-supply); }

        .faq-item[data-category="general"] .faq-question i { color: var(--category-general); }
        .faq-item[data-category="rules"] .faq-question i { color: var(--category-rules); }
        .faq-item[data-category="admin"] .faq-question i { color: var(--category-admin); }
        .faq-item[data-category="fractions"] .faq-question i { color: var(--category-fractions); }
        .faq-item[data-category="supply"] .faq-question i { color: var(--category-supply); }

        .faq-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            transition: background-color 0.3s;
        }

        .faq-item[data-category="general"]::before { background-color: var(--category-general); }
        .faq-item[data-category="rules"]::before { background-color: var(--category-rules); }
        .faq-item[data-category="admin"]::before { background-color: var(--category-admin); }
        .faq-item[data-category="fractions"]::before { background-color: var(--category-fractions); }
        .faq-item[data-category="supply"]::before { background-color: var(--category-supply); }

        .category-counter {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 0.8rem;
            margin-left: 8px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-color);
            color: var(--text-primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .faq-wide {
            grid-column: 1 / -1;
            max-height: none;
        }

        .faq-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 240px;
            }

            .container {
                padding: 1rem;
            }

            .commands-container {
                grid-template-columns: 1fr;
            }

            .faq-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2.2rem;
            }

            .search-box {
                padding: 15px 20px;
                padding-left: 50px;
                font-size: 1rem;
            }

            .search-icon {
                left: 20px;
                top: 50%;
            }

            .card-header {
                padding: 20px;
            }

            .card-content {
                max-height: none;
            }

            .categories-tabs {
                flex-direction: column;
                align-items: center;
                margin: 20px 0;
            }

            .category-tab {
                width: 100%;
                text-align: center;
                padding: 12px 24px;
                font-size: 1.05rem;
            }

            .login-container {
                padding: 2rem 1.25rem;
            }

            .login-title {
                font-size: 1.5rem;
            }

            .login-subtitle {
                font-size: 0.9rem;
            }

            .login-logo {
                width: 70px;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <canvas id="stars-canvas"></canvas>
    <button id="logout-btn" class="hidden">Вийти</button>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-menu">
            <div class="menu-category">Скрипти</div>
            <a href="script1.1.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.1</a>
            <a href="script1.2.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.2</a>
            <a href="script1.3.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.3</a>
            <a href="script1.4.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.4</a>
            <a href="script1.5.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.5</a>
            <a href="script1.6.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.6</a>
            <a href="script1.7.html" class="menu-item"><i class="fas fa-code"></i> Скрипт 1.7</a>
            <div class="menu-category">Інформація</div>
            <a href="index.html" class="menu-item"><i class="fas fa-home"></i> Головна</a>
            <a href="team.html" class="menu-item"><i class="fas fa-users"></i> Команда проєкту</a>
            <a href="tickets.html" class="menu-item"><i class="fas fa-ticket-alt"></i> Регламент тікетів</a>
            <a href="commands.html" class="menu-item active"><i class="fas fa-terminal"></i> Команди адміністратора</a>
            <a href="faq.html" class="menu-item"><i class="fas fa-question-circle"></i> Питання та відповіді</a>
            <a href="frac.html" class="menu-item"><i class="fas fa-flag"></i> Фракції</a>
            <a href="binder.html" class="menu-item"><i class="fas fa-robot"></i> BinderBot</a>
            <div class="menu-category" id="superMenuCategory" style="display: none;">Суперадмін</div>
            <a href="test.html" class="super-menu-item" id="superMenuItem1" style="display: none;"><i class="fas fa-chart-bar"></i> Статистика</a>
            <a href="super-script2.html" class="super-menu-item" id="superMenuItem2" style="display: none;"><i class="fas fa-calculator"></i> Калькулятор онлайну</a>
            <a href="super-script3.html" class="super-menu-item" id="superMenuItem3" style="display: none;"><i class="fas fa-warehouse"></i> Контроль складу</a>
        </div>
    </div>
    <div class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></div>

    <div class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <div id="login-section">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-book" style="font-size: 2rem; color: var(--text-primary);"></i>
            </div>
            <h1 class="login-title">Адміністративний посібник</h1>
            <p class="login-subtitle">Увійдіть через Telegram для доступу до контенту</p>
            <div class="telegram-button-wrapper">
                <script async src="https://telegram.org/js/telegram-widget.js?7"
                        data-telegram-login="ticket_tracker_UG_bot"
                        data-size="large"
                        data-userpic="false"
                        data-request-access="write"
                        data-onauth="onTelegramAuth(user)">
                </script>
            </div>
            <div class="login-footer">
                Потрібна допомога? <a href="support.html">Зверніться до підтримки</a>
            </div>
        </div>
    </div>

    <div id="content" class="hidden">
        <div class="container">
            <header>
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-book"></i>
                        <h1>Адміністративний посібник</h1>
                    </div>
                    <p class="subtitle">Перелік правил та відповідей на питання для адміністрації сервера Ukraine GTA 5 RolePlay.</p>
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-box" id="search-input" placeholder="Пошук питання або відповіді...">
                    </div>
                </div>
            </header>

            <div class="commands-container">
                <div class="level-card level-faq faq-wide">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h2 class="card-title">Питання та Відповіді</h2>
                    </div>
                    <div class="card-content">
                        <div class="categories-tabs">
                            <div class="category-tab category-general active" data-category="all">
                                Усі питання <span class="category-counter" id="count-all">0</span>
                            </div>
                            <div class="category-tab category-general" data-category="general">
                                Загальні <span class="category-counter" id="count-general">0</span>
                            </div>
                            <div class="category-tab category-rules" data-category="rules">
                                Правила <span class="category-counter" id="count-rules">0</span>
                            </div>
                            <div class="category-tab category-admin" data-category="admin">
                                Адміністрація <span class="category-counter" id="count-admin">0</span>
                            </div>
                            <div class="category-tab category-fractions" data-category="fractions">
                                Фракції <span class="category-counter" id="count-fractions">0</span>
                            </div>
                            <div class="category-tab category-supply" data-category="supply">
                                Постачання <span class="category-counter" id="count-supply">0</span>
                            </div>
                        </div>
                        <div class="faq-grid" id="faq-container"></div>
                    </div>
                </div>
            </div>

            <footer>
                <p class="footer-logo">Ukraine GTA 5 RolePlay</p>
                <p class="copyright">© 2025 Ukraine GTA 5 RolePlay | Адміністрація сервера</p>
            </footer>
        </div>
    </div>

    <script>
        // Falling Stars Animation
        const canvas = document.getElementById('stars-canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const stars = [];
        const numStars = 30;

        class Star {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * -canvas.height;
                this.size = Math.random() * 1.5 + 0.5;
                this.speed = Math.random() * 2 + 0.5;
                this.opacity = Math.random() * 0.4 + 0.2;
            }

            update() {
                this.y += this.speed;
                if (this.y > canvas.height) {
                    this.reset();
                }
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                ctx.fill();
            }
        }

        for (let i = 0; i < numStars; i++) {
            stars.push(new Star());
        }

        function animateStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stars.forEach(star => {
                star.update();
                star.draw();
            });
            requestAnimationFrame(animateStars);
        }

        animateStars();

        const SHEET_ID = '1fobxr4QwD8CLYFaTh2WXNbGwqQ2mWEuQDPkqDzvzkoU';
        const API_KEY = 'AIzaSyB3NNELU9ok5mkbHQnBEoOfRtNtPb-y5LU';

        const superAdmins = ['@laker_77', '@B_m_b1', '@c10mm'];

        document.getElementById('sidebarToggle').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('open');
        });

        document.addEventListener('click', (event) => {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.getElementById('sidebarToggle');
            if (!sidebar.contains(event.target) && !toggle.contains(event.target) && sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });

        async function getSheetData(sheetName) {
            try {
                const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${encodeURIComponent(sheetName)}?key=${API_KEY}`;
                const res = await axios.get(url, { timeout: 10000 });
                return res.data.values || [];
            } catch (error) {
                console.error(`Error fetching data from ${sheetName}:`, error);
                return [];
            }
        }

        async function onTelegramAuth(user) {
            if (!user || !user.username) {
                alert('Невалідні дані користувача');
                showLoginForm();
                return;
            }

            const telegramUsername = '@' + user.username;

            try {
                const ticketsData = await getSheetData('Май_2025_таблица');
                if (!ticketsData.length) {
                    alert('Дані не знайдено');
                    showLoginForm();
                    return;
                }
                const ticketsHeaders = ticketsData[0];
                const telegramColIndex = ticketsHeaders.indexOf('Telegram');

                if (telegramColIndex === -1) {
                    alert('Помилка структури даних: відсутній стовпець Telegram');
                    showLoginForm();
                    return;
                }

                const userTicketsRow = ticketsData.find(row => 
                    row[telegramColIndex]?.trim().toLowerCase() === telegramUsername.toLowerCase()
                );

                if (userTicketsRow) {
                    const userData = {
                        username: telegramUsername,
                        nickname: userTicketsRow[0] || user.first_name || user.username,
                        isAdmin: superAdmins.includes(telegramUsername)
                    };
                    localStorage.setItem('tg_auth', JSON.stringify(userData));
                    showContent(userData);
                } else {
                    localStorage.removeItem('tg_auth');
                    alert('Користувача не знайдено в таблиці. Доступ заборонено.');
                    showLoginForm();
                }
            } catch (error) {
                console.error('Authentication error:', error);
                alert('Помилка під час завантаження даних');
                showLoginForm();
            }
        }

        function showContent(userData) {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            document.getElementById('logout-btn').classList.remove('hidden');
            document.getElementById('sidebarToggle').classList.remove('hidden');

            if (userData.isAdmin) {
                document.getElementById('superMenuCategory').style.display = 'block';
                document.getElementById('superMenuItem1').style.display = 'flex';
                document.getElementById('superMenuItem2').style.display = 'flex';
                document.getElementById('superMenuItem3').style.display = 'flex';
            }
        }

        function showLoginForm() {
            document.getElementById('login-section').style.display = 'flex';
            document.getElementById('content').style.display = 'none';
            document.getElementById('logout-btn').classList.add('hidden');
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('sidebarToggle').classList.add('hidden');
        }

        function logout() {
            localStorage.removeItem('tg_auth');
            showLoginForm();
        }

        const faqData = [
            { category: "admin", question: "Чи мають право гравці продовжити РП процесс при телепортації Адміністрації з червоним ніком?", answer: "Ні, RP-процес має бути зупинений при появі адміністратора з червоним нікнеймом." },
            { category: "admin", question: "Скільки днів адміністратор зобов’язаний зберігати докази після видачі покарання?", answer: "7 днів." },
            { category: "admin", question: "Що буде, якщо адміністратор використає F2 без інвізу?", answer: "Попередження або догана." },
            { category: "admin", question: "Чи може адміністратор 2 рівня ігнорувати тікети?", answer: "Ні, адміністратор 2 рівня зобов’язаний обробляти тікети." },
            { category: "admin", question: "Чи може адміністратор брати тікети іншого адміністратора без його згоди?", answer: "Ні, потрібна згода іншого адміністратора." },
            { category: "admin", question: "Чи може адміністратор використовувати /kick для розваги?", answer: "Ні, це порушення правил." },
            { category: "admin", question: "Чи можна адміністратору видавати покарання без доказів?", answer: "Ні, покарання без доказів заборонено." },
            { category: "admin", question: "Чи може адміністратор видавати бан за підозрою у чітерстві без перевірки?", answer: "Ні, потрібна перевірка через спеціальні інструменти." },
            { category: "admin", question: "Чи має право адміністратор брати тікет, якщо гравець у тікеті просить іншого адміністратора?", answer: "Ні, потрібно поважати вибір гравця." },
            { category: "admin", question: "Чи може адміністратор 3 рівня видавати бан більше ніж на 3 дні?", answer: "Так, але за умови узгодження з вищим адміністратором." },
            { category: "general", question: "Чи дозволено гравцям вести себе як \"божевільні\" без легенди?", answer: "Ні, потрібна попередня реєстрація/біографія." },
            { category: "general", question: "Чи можна використовувати модифікації гри?", answer: "Тільки дозволені моди, затверджені адміністрацією." },
            { category: "general", question: "Чи можна передавати акаунт іншому гравцеві?", answer: "Ні, передача акаунту заборонена." },
            { category: "general", question: "Чи дозволено використовувати баги гри для власної вигоди?", answer: "Ні, це карається баном." },
            { category: "general", question: "Чи можна продавати внутрішньоігрові предмети за реальні гроші?", answer: "Ні, це порушення правил сервера." },
            { category: "rules", question: "Що таке DM (DeathMatch)?", answer: "DM — це вбивство гравців без РП причини." },
            { category: "rules", question: "Чи дозволено ображати інших гравців у чаті?", answer: "Ні, образи заборонені та караються." },
            { category: "rules", question: "Що таке MG (MetaGaming)?", answer: "MG — використання інформації поза РП для впливу на гру." },
            { category: "rules", question: "Чи можна використовувати макроси для автоматизації дій?", answer: "Ні, використання макросів заборонено." },
            { category: "rules", question: "Що таке PowerGaming?", answer: "PowerGaming — нереалістичні дії, які порушують РП." },
            { category: "fractions", question: "Чи може гравець бути у двох фракціях одночасно?", answer: "Ні, гравець може бути лише в одній фракції." },
            { category: "fractions", question: "Як вступити до фракції?", answer: "Потрібно подати заявку через сайт або в грі." },
            { category: "fractions", question: "Чи може лідер фракції видавати накази поза РП?", answer: "Ні, усі накази мають відповідати РП." },
            { category: "fractions", question: "Чи можна атакувати базу іншої фракції без РП причини?", answer: "Ні, потрібна РП причина." },
            { category: "supply", question: "Як отримати ресурси для постачання?", answer: "Через спеціальні квести або торгівлю." },
            { category: "supply", question: "Чи можна красти ресурси у інших гравців?", answer: "Так, але тільки в рамках РП." },
            { category: "supply", question: "Чи є ліміт на зберігання ресурсів?", answer: "Так, ліміт залежить від рівня складу." }
        ];

        function generateFAQ() {
            const container = document.getElementById('faq-container');
            container.innerHTML = '';

            faqData.forEach(item => {
                const faqItem = document.createElement('div');
                faqItem.className = 'faq-item';
                faqItem.dataset.category = item.category;
                faqItem.innerHTML = `
                    <div class="faq-question"><i class="fas fa-question"></i> Питання: ${item.question}</div>
                    <div class="faq-answer">Відповідь: ${item.answer}</div>
                `;
                container.appendChild(faqItem);
            });

            updateCategoryCounters();
        }

        function updateCategoryCounters() {
            const categories = ['all', 'general', 'rules', 'admin', 'fractions', 'supply'];

            categories.forEach(category => {
                let count;
                if (category === 'all') {
                    count = faqData.length;
                } else {
                    count = faqData.filter(item => item.category === category).length;
                }
                document.getElementById(`count-${category}`).textContent = count;
            });
        }

        function filterByCategory(category) {
            const items = document.querySelectorAll('.faq-item');

            items.forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function searchFAQ(term) {
            const items = document.querySelectorAll('.faq-item');
            term = term.toLowerCase().trim();

            items.forEach(item => {
                const question = item.querySelector('.faq-question').textContent.toLowerCase();
                const answer = item.querySelector('.faq-answer').textContent.toLowerCase();

                if (term === '' || question.includes(term) || answer.includes(term)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('logout-btn').addEventListener('click', logout);

            generateFAQ();

            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.category-tab').forEach(t => {
                        t.classList.remove('active');
                    });

                    this.classList.add('active');
                    filterByCategory(this.dataset.category);
                });
            });

            document.getElementById('search-input').addEventListener('input', function() {
                searchFAQ(this.value);
            });

            const backToTopBtn = document.querySelector('.back-to-top');

            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });

            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            const savedAuth = localStorage.getItem('tg_auth');
            if (savedAuth) {
                try {
                    const userData = JSON.parse(savedAuth);
                    showContent(userData);
                } catch (e) {
                    localStorage.removeItem('tg_auth');
                    showLoginForm();
                }
            } else {
                showLoginForm();
            }

            const levelCards = document.querySelectorAll('.level-card');

            levelCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.8s ease, transform 0.8s ease';

                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 150 * index);
            });
        });
    </script>
</body>
</html>
